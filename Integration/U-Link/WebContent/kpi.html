<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <title>KPI</title>
 <link href="css/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
   

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-1.12.0.js"></script>
    <script src="js/moment.js"></script>
    <script src="js/bootstrap-datetimepicker.min.js"></script>
    <script src="js/bootstrap-datetimepicker.js"></script>
    <script src="js/bootstrap.min.js"></script>
	<script src="http://www.w3schools.com/lib/w3data.js"></script>



<script type="text/javascript">

$(document).ready(function() {
	
	$("#submit").click (
			function(){
		var table;
		var teamName = $('#teamName').val();
		var startDate = $("#startDate").val();
		var endDate = $("#endDate").val();
		console.log(teamName);
		console.log(startDate);
		$.ajax({
			url : "Analysis",
			type : "get",
			data : 'teamName=' + teamName + '&' + 'startDate=' + startDate + '&' + 'endDate=' + endDate,
			dataType : "json",
			success : function(data) {
				var json = jQuery.parseJSON(JSON.stringify(data));
	
				console.log(json);
				if (teamName == "Medical") {
					table ="<tr><th>Number of in Patient</th><th>Number of out Patient</th>";
		
			      
			                table += '<tr>'
			                      + '<td>'
			                      + json.inPatient
			                      + '</td>'
			                      + '<td>'
			                      + json.outPatient
			                      + '</td></tr>';

			    

				} else {
					
					table ="<tr><th>Number of Indonesian Patients</th><th>Number of Non-Indonesian Patients</th>";
		
			      
			                table += '<tr>'
			                      + '<td>'
			                      + json.indo
			                      + '</td>'
			                      + '<td>'
			                      + json.nonIndo
			                      + '</td></tr>';
				}

        $('#kpi').html(table);



        /* sean's quotes
				console.log(json);

				if (teamName == "Medical") {
					$('#green').html("Number of in Patient " + json.inPatient);
					$('#red').html("Number of out Patient " + json.outPatient);
				} else {
					$('#green').html("Number of Indonesian Patients " + json.indo);
					$('#red').html("Number of Non-Indonesian Patients " + json.nonIndo);
				}
  */
			
			} });


	});
 	
});
 	</script>
  </head>
  <body>
    
   <div w3-include-html="navBar.html"></div> 
	<script>
		w3IncludeHTML();
	</script>

    <div class="page-header">
       <h1 align ="center">Analysis - KPI</h1>
    </div>

      

    <div class="container">
      <div class="row">
          <div class="col-md-4">
          <div class="caption">
          <div class="form-group">
            <label>Select Team </label>
            <select class="form-control" id="teamName">
              <option value="Medical">Medical</option>
              <option value="Visa">Visa</option>
            </select>
          </div>          
          </div>
          </div>

          <div class="col-md-4">
          <div class="form-group">
          <label> Select Start Date </label>
          <div class='input-group date' id='datetimepicker1'>
            <input type='text' class="form-control" id="startDate" />
            <span class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
            </span>
          </div>

          <script type="text/javascript">
          $(function () {
            $('#datetimepicker1').datetimepicker();
         });
          </script>
        </div>
        </div>

        <div class="col-md-4">
          <div class="form-group">
          <label> Select End Date </label>
          <div class='input-group date' id='datetimepicker2'>
            <input type='text' class="form-control" id="endDate" />
            <span class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
            </span>
        </div>

          <script type="text/javascript">
          $(function () {
            $('#datetimepicker2').datetimepicker();
         });
          </script>
        </div>
        </div>


      </div>
    <div class="container" align="center">
        <button type="submit" value="Submit" class="btn btn-primary" id="submit">Generate</button>
    </div>
    

    <br>
    <div class="container">

    <table class="table table-striped" id="kpi">
    
    </table>
  </div>
    </div>
    <!-- sean's codes
    <div align="center" id="green"></div>
    <div align="center" id="red"></div>
    -->
  </body>
</html>
