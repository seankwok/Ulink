<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Ranking</title>

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/bootstrap-datetimepicker.min.css" rel="stylesheet">


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="js/jquery-1.12.0.js"></script>
<script src="js/moment.js"></script>
<script src="js/bootstrap-datetimepicker.min.js"></script>
<script src="js/bootstrap-datetimepicker.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="http://www.w3schools.com/lib/w3data.js"></script>


<script type="text/javascript">

$(document).ready(function() {
	
	$("#submit").click (
			function(){
			
		var kValue = $('#kValue').val();
		var startDate = $("#startDate").val();
		var endDate = $("#endDate").val();
		var type = $("#type").val();
		var count =0;
		var previous;
		var table = "<tr><th>Ranking</th><th>Name</th><th>Number of times "+ type +" was engaged</th>";
		$.ajax({
			url : "TopResult",
			type : "get",
			data : 'kValue=' + kValue + '&' + 'startDate=' + startDate + '&' + 'endDate=' + endDate + '&' + 'type=' + type,
			dataType : "json",
			success : function(data) {
				var json = jQuery.parseJSON(JSON.stringify(data));
				
				$
				.each(
						json,
						function(key, value) {
							
						if(previous != value){
							count += 1;	
						}
							table += '<tr>'
									+ '<td>'
									+ count
									+ '</td>'
									+ '<td>'
									+ key
									+ '</td>'
									+ '<td>'
									+ value
									+ '</td></tr>';
							
							previous = value;	
							

						});
				$('#topK').html(table);  
			}
		});


	});
 	
});
 	</script>

</head>
<body>

<div w3-include-html="navBar.html"></div> 
	<script>
		w3IncludeHTML();
	</script>

	<div class="page-header">
		<h1 align="center">Analysis - Ranking</h1>
	</div>

	<div class="container">

		<div class="col-md-4">
			<div class="form-group">
				<label>Select Criteria </label> <select class="form-control"
					id="type">
					<option value="doctor">Doctor</option>
					<option value="Referral">Referral</option>
					<option value="Speciality">Specialty</option>
				</select>
			</div>
		</div>

		<div class="col-md-4">
			<div class="form-group">
				<label> Select Start Date </label>
				<div class='input-group date' id='datetimepicker1'>
					<input type='text' class="form-control" id="startDate"/> <span
						class="input-group-addon"> <span
						class="glyphicon glyphicon-calendar"></span>
					</span>
				</div>
				<script type="text/javascript">
					$(function() {
						$('#datetimepicker1').datetimepicker();
					});
				</script>
			</div>
		</div>

		<div class="col-md-4">
			<div class="form-group">
				<label> Select End Date </label>
				<div class='input-group date' id='datetimepicker2'>
					<input type='text' class="form-control" id="endDate"/> <span
						class="input-group-addon"> <span
						class="glyphicon glyphicon-calendar"></span>
					</span>
				</div>
				<script type="text/javascript">
					$(function() {
						$('#datetimepicker2').datetimepicker();
					});
				</script>
			</div>
		</div>
	</div>
	<div class="container" align="center">
		  <button type="submit" value="Submit" class="btn btn-primary" id="submit">Generate</button>
	</div>
		<br>
		<div class="container">

		<table class="table table-striped" id="topK">
		
		</table>
	</div>
</body>
</html>
