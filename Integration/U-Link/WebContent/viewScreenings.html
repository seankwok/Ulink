<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <title>View Screening</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="js/jquery-1.12.0.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="http://www.w3schools.com/lib/w3data.js"></script>
	
 	
 	<style>
 	#myInput {
		    background-image: url('/css/searchicon.png'); /* Add a search icon to input */
		    background-position: 10px 12px; /* Position the search icon */
		    background-repeat: no-repeat; /* Do not repeat the icon image */
		    width: 30%; /* Full-width */
		    font-size: 16px; /* Increase font-size */
		    padding: 12px 20px 12px 40px; /* Add some padding */
		    border: 1px solid #ddd; /* Add a grey border */
		    margin-bottom: 12px; /* Add some space below the input */
		}
		
		#table {
		    border-collapse: collapse; /* Collapse borders */
		    width: 100%; /* Full-width */
		    font-size: 14px; /* Increase font-size */
		}
		
		#table th, #table td {
		    text-align: left; /* Left-align text */
		    padding: 10px; /* Add padding */
		    
		}

		#table tr {
		    /* Add a bottom border to all table rows */
		    border-bottom: 1px solid #ddd; 
		     padding-bottom: 30px; /* Add padding */
		}
		
		#table tr.header, #table tr:hover {
		    /* Add background color to the table header and on hover */
		    font-color: black;
		     margin-bottom: 5px;
		}
		
		
		/* unvisited link */
	a:link {
	    text-decoration:none;
	}
	
	/* visited link */
	a:visited {
	    text-decoration:none;
	}
	
	/* mouse over link */
	a:hover {
	    text-decoration:none;
	}
	
	/* selected link */
	a:active {
	    text-decoration:none;
	}
	
 	</style>
 	
 	
 	<script type="text/javascript">
	
	$(document).ready(function() {
		displayAll();

		$("#selectAdult").click(function(){
			window.location = "viewScreeningsAdult.html";
		});
			
		});
	

	function compareUp(el1, el2, index) {
		  return el1[index] == el2[index] ? 0 : (el1[index] < el2[index] ? -1 : 1);
	}
	function compareDown(el1, el2, index) {
		  return el1[index] == el2[index] ? 0 : (el1[index] > el2[index] ? -1 : 1);
	}

	function sortAscAge(clickedID){
		var table = "<table id='table' class=' table-hover'>";
		$.ajax({
			url: "DisplayAllInfant",
			type: "get",
		    dataType : "json",
		    complete: function(data){
		    	var json = jQuery.parseJSON(data.responseText);
		    	table += "<thead><tr><th>Starting Age<a href='#' onClick=sortAscAge(this.id) id='ageRequired'>&#9652</a>"
	    			+ "<a href='#' onClick=sortDescAge(this.id) id='ageRequired'> &#9662</a></th>"
	    			+ "<th>Common Illness<a href='#' onClick=sortAscIllness(this.id) id='conditionName'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='conditionName'> &#9662</a></th>"
	    			+ "<th>Screening <a href='#' onClick=sortAscScreening(this.id) id='screening'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='screening'> &#9662</a></th>"
	    			+ "<th>Regularity of screening</th>"
	    			+ "<th>View Patients</th>"
	    			+ "<th>Edit</th>"
	    			+ "<th>Delete</th></tr></thead>";		    	
	    			json.sort(function(el1,el2){
		    		  return compareUp(el1, el2, "ageRequired")
		    		});		
		    	$.each(json,function(key, value) {
		    		table += "<tbody><tr><td>"
	    				+ value["ageRequired"]
	    				+ "</td>"
	    				+ "<td>"
	    				+ value["conditionName"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["screening"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["years"] 
    					+ "</td>"
    					+ "<td>"
	    				+"<a href='#' onClick=viewPatientList(this.id) id= '"
	    				+ value.ID
	    				+ "'>Link to view patients</a>"
    					+ "</td>"
    					+ "<td>"
	    				+ "<a href='#' onClick=editItem(this.id) id= '"
	    				+ value.ID
	    				+ "'>Edit</a>"
    					+ "</td>"
    					+ '<td><a href=# onClick=deleteItem(this.id) id="'
						+ value.ID
						+ '">Delete</a></td></tr>'		    				
						+ "</td></tr></tbody>"
		    	});
		    	table += "</tbody></table>"
		    	$("#display").html(table);
		    }
		});
	}
	function sortDescAge(clickedID){
		var table = "<table id='table' class=' table-hover'>";
		$.ajax({
			url: "DisplayAllInfant",
			type: "get",
		    dataType : "json",
		    complete: function(data){
		    	var json = jQuery.parseJSON(data.responseText);
		    	table += "<thead><tr><th>Starting Age<a href='#' onClick=sortAscAge(this.id) id='ageRequired'>&#9652</a>"
	    			+ "<a href='#' onClick=sortDescAge(this.id) id='ageRequired'> &#9662</a></th>"
	    			+ "<th>Common Illness<a href='#' onClick=sortAscIllness(this.id) id='conditionName'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='conditionName'> &#9662</a></th>"
	    			+ "<th>Screening <a href='#' onClick=sortAscScreening(this.id) id='screening'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='screening'> &#9662</a></th>"
	    			+ "<th>Regularity of screening</th>"
	    			+ "<th>View Patients</th>"
	    			+ "<th>Edit</th>"
	    			+ "<th>Delete</th></tr></thead>";
	    			json.sort(function(el1,el2){
		    		  return compareDown(el1, el2, "ageRequired")
		    		});		
		    	$.each(json,function(key, value) {
		    		table += "<tbody><tr><td>"
	    				+ value["ageRequired"]
	    				+ "</td>"
	    				+ "<td>"
	    				+ value["conditionName"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["screening"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["years"] 
    					+ "</td>"
    					+ "<td>"
	    				+"<a href='#' onClick=viewPatientList(this.id) id= '"
	    				+ value.ID
	    				+ "'>Link to view patients</a>"
    					+ "</td>"
    					+ "<td>"
	    				+ "<a href='#' onClick=editItem(this.id) id= '"
	    				+ value.ID
	    				+ "'>Edit</a>"
    					+ "</td>"
    					+ '<td><a href=# onClick=deleteItem(this.id) id="'
						+ value.ID
						+ '">Delete</a></td></tr>'		    				
						+ "</td></tr></tbody>"
		    	});
		    	table += "</tbody></table>"
		    	$("#display").html(table);
		    }
		});
	}
	
	function sortAscIllness(clickedID){
		var table = "<table id='table' class=' table-hover'>";
		$.ajax({
			url: "DisplayAllInfant",
			type: "get",
		    dataType : "json",
		    complete: function(data){
		    	var json = jQuery.parseJSON(data.responseText);
		    	table += "<thead><tr><th>Starting Age<a href='#' onClick=sortAscAge(this.id) id='ageRequired'>&#9652</a>"
	    			+ "<a href='#' onClick=sortDescAge(this.id) id='ageRequired'> &#9662</a></th>"
	    			+ "<th>Common Illness<a href='#' onClick=sortAscIllness(this.id) id='conditionName'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='conditionName'> &#9662</a></th>"
	    			+ "<th>Screening <a href='#' onClick=sortAscScreening(this.id) id='screening'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='screening'> &#9662</a></th>"
	    			+ "<th>Regularity of screening</th>"
	    			+ "<th>View Patients</th>"
	    			+ "<th>Edit</th>"
	    			+ "<th>Delete</th></tr></thead>";
	    			json.sort(function(el1,el2){
		    		  return compareUp(el1, el2, "conditionName")
		    		});		
		    	$.each(json,function(key, value) {
		    		table += "<tbody><tr><td>"
	    				+ value["ageRequired"]
	    				+ "</td>"
	    				+ "<td>"
	    				+ value["conditionName"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["screening"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["years"] 
    					+ "</td>"
    					+ "<td>"
	    				+"<a href='#' onClick=viewPatientList(this.id) id= '"
	    				+ value.ID
	    				+ "'>Link to view patients</a>"
    					+ "</td>"
    					+ "<td>"
	    				+ "<a href='#' onClick=editItem(this.id) id= '"
	    				+ value.ID
	    				+ "'>Edit</a>"
    					+ "</td>"
    					+ '<td><a href=# onClick=deleteItem(this.id) id="'
						+ value.ID
						+ '">Delete</a></td></tr>'		    				
						+ "</td></tr></tbody>"
		    	});
		    	table += "</tbody></table>"
		    	$("#display").html(table);
		    }
		});
	}
	
	function sortDescIllness(clickedID){
		var table = "<table id='table' class=' table-hover'>";
		$.ajax({
			url: "DisplayAllInfant",
			type: "get",
		    dataType : "json",
		    complete: function(data){
		    	var json = jQuery.parseJSON(data.responseText);
		    	table += "<thead><tr><th>Starting Age<a href='#' onClick=sortAscAge(this.id) id='ageRequired'>&#9652</a>"
	    			+ "<a href='#' onClick=sortDescAge(this.id) id='ageRequired'> &#9662</a></th>"
	    			+ "<th>Common Illness<a href='#' onClick=sortAscIllness(this.id) id='conditionName'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='conditionName'> &#9662</a></th>"
	    			+ "<th>Screening <a href='#' onClick=sortAscScreening(this.id) id='screening'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='screening'> &#9662</a></th>"
	    			+ "<th>Regularity of screening</th>"
	    			+ "<th>View Patients</th>"
	    			+ "<th>Edit</th>"
	    			+ "<th>Delete</th></tr></thead>";	
	    			json.sort(function(el1,el2){
		    		  return compareDown(el1, el2, "conditionName")
		    		});		
		    	$.each(json,function(key, value) {
		    		table += "<tbody><tr><td>"
	    				+ value["ageRequired"]
	    				+ "</td>"
	    				+ "<td>"
	    				+ value["conditionName"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["screening"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["years"] 
    					+ "</td>"
    					+ "<td>"
	    				+"<a href='#' onClick=viewPatientList(this.id) id= '"
	    				+ value.ID
	    				+ "'>Link to view patients</a>"
    					+ "</td>"
    					+ "<td>"
	    				+ "<a href='#' onClick=editItem(this.id) id= '"
	    				+ value.ID
	    				+ "'>Edit</a>"
    					+ "</td>"
    					+ '<td><a href=# onClick=deleteItem(this.id) id="'
						+ value.ID
						+ '">Delete</a></td></tr>'		    				
						+ "</td></tr></tbody>"
		    	});
		    	table += "</tbody></table>"
		    	$("#display").html(table);
		    }
		});
	}
	
	function sortAscScreening(clickedID){
		var table = "<table id='table' class=' table-hover'>";
		$.ajax({
			url: "DisplayAllInfant",
			type: "get",
		    dataType : "json",
		    complete: function(data){
		    	var json = jQuery.parseJSON(data.responseText);
		    	table += "<thead><tr><th>Starting Age<a href='#' onClick=sortAscAge(this.id) id='ageRequired'>&#9652</a>"
	    			+ "<a href='#' onClick=sortDescAge(this.id) id='ageRequired'> &#9662</a></th>"
	    			+ "<th>Common Illness<a href='#' onClick=sortAscIllness(this.id) id='conditionName'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='conditionName'> &#9662</a></th>"
	    			+ "<th>Screening <a href='#' onClick=sortAscScreening(this.id) id='screening'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='screening'> &#9662</a></th>"
	    			+ "<th>Regularity of screening</th>"
	    			+ "<th>View Patients</th>"
	    			+ "<th>Edit</th>"
	    			+ "<th>Delete</th></tr></thead>";
	    			json.sort(function(el1,el2){
		    		  return compareUp(el1, el2, "screening")
		    		});		
		    	$.each(json,function(key, value) {
		    		table += "<tbody><tr><td>"
	    				+ value["ageRequired"]
	    				+ "</td>"
	    				+ "<td>"
	    				+ value["conditionName"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["screening"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["years"] 
    					+ "</td>"
    					+ "<td>"
	    				+"<a href='#' onClick=viewPatientList(this.id) id= '"
	    				+ value.ID
	    				+ "'>Link to view patients</a>"
    					+ "</td>"
    					+ "<td>"
	    				+ "<a href='#' onClick=editItem(this.id) id= '"
	    				+ value.ID
	    				+ "'>Edit</a>"
    					+ "</td>"
    					+ '<td><a href=# onClick=deleteItem(this.id) id="'
						+ value.ID
						+ '">Delete</a></td></tr>'		    				
						+ "</td></tr></tbody>"
		    	});
		    	table += "</tbody></table>"
		    	$("#display").html(table);
		    }
		});
	}
	
	function sortDescScreening(clickedID){
		var table = "<table id='table' class=' table-hover'>";
		$.ajax({
			url: "DisplayAllInfant",
			type: "get",
		    dataType : "json",
		    complete: function(data){
		    	var json = jQuery.parseJSON(data.responseText);
		    	table += "<thead><tr><th>Starting Age<a href='#' onClick=sortAscAge(this.id) id='ageRequired'>&#9652</a>"
	    			+ "<a href='#' onClick=sortDescAge(this.id) id='ageRequired'> &#9662</a></th>"
	    			+ "<th>Common Illness<a href='#' onClick=sortAscIllness(this.id) id='conditionName'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='conditionName'> &#9662</a></th>"
	    			+ "<th>Screening <a href='#' onClick=sortAscScreening(this.id) id='screening'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='screening'> &#9662</a></th>"
	    			+ "<th>Regularity of screening</th>"
	    			+ "<th>View Patients</th>"
	    			+ "<th>Edit</th>"
	    			+ "<th>Delete</th></tr></thead>";
	    			json.sort(function(el1,el2){
		    		  return compareDown(el1, el2, "screening")
		    		});		
		    	$.each(json,function(key, value) {
		    		table += "<tbody><tr><td>"
	    				+ value["ageRequired"]
	    				+ "</td>"
	    				+ "<td>"
	    				+ value["conditionName"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["screening"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["years"] 
    					+ "</td>"
    					+ "<td>"
	    				+"<a href='#' onClick=viewPatientList(this.id) id= '"
	    				+ value.ID
	    				+ "'>Link to view patients</a>"
    					+ "</td>"
    					+ "<td>"
	    				+ "<a href='#' onClick=editItem(this.id) id= '"
	    				+ value.ID
	    				+ "'>Edit</a>"
    					+ "</td>"
    					+ '<td><a href=# onClick=deleteItem(this.id) id="'
						+ value.ID
						+ '">Delete</a></td></tr>'		    				
						+ "</td></tr></tbody>"
		    	});
		    	table += "</tbody></table>"
		    	$("#display").html(table);
		    }
		});
	}
	
	
 
	function mySearch() {
		 var searchText = document.getElementById('myInput').value.toUpperCase();
		    var targetTable = document.getElementById('table');
		    var targetTableColCount;
		            
		    //Loop through table rows
		    for (var rowIndex = 0; rowIndex < targetTable.rows.length; rowIndex++) {
		        var rowData = '';

		        //Get column count from header row
		        if (rowIndex == 0) {
		           targetTableColCount = targetTable.rows.item(rowIndex).cells.length;
		           continue; //do not execute further code for header row.
		        }
		                
		        //Process data rows. (rowIndex >= 1)
		        for (var colIndex = 0; colIndex < targetTableColCount; colIndex++) {
		            rowData += targetTable.rows.item(rowIndex).cells.item(colIndex).textContent.toUpperCase();
		        }

		        //If search term is not found in row data
		        //then hide the row, else show
		        if (rowData.indexOf(searchText) == -1)
		            targetTable.rows.item(rowIndex).style.display = 'none';
		        else
		            targetTable.rows.item(rowIndex).style.display = 'table-row';
		    }
	}
	
	
	
	function deleteItem(clickedID){
			
			var sendData = {
					"ID" : clickedID
				};
				console.log(clickedID);
				$.ajax({
					url : "DeleteCondition",
					type : "post",
					data : sendData,
					dataType : "json",
					success : function(data) {
						displayAll();
						console.log("delete");
					}
	
				});
	    } 
	function logout(){
		$.ajax({
			url: "Logout",
			type: "post",
			
		});
	}
	
	function editItem(clickedID){
		var sendData = {
				"ID" : clickedID
			};
			console.log(clickedID);
			$.ajax({
				url : "EditCondition",
				type : "post",
				data : sendData,
				dataType : "json",
				complete : function(data) {
					displayAll();
						window.location="editTimelineSummary.html";
					
				}

			});
	}
	
	function viewPatientList(clickedID){
		var sendData = {
				"ID" : clickedID
			};
		var table = "<table id='table'  class='display' cellspacing='0' width='100%'>";
			console.log(clickedID);
			$.ajax({
				url : "DisplayAllClientByCondition",
				type : "get",
				data : sendData,
				dataType : "json",
				success: function(data){
			    	var json = jQuery.parseJSON(JSON.stringify(data));
			    	console.log(json);
			    	table += "<thead><tr><th>Age</th><th>Client Name</th><th>Select</th></tr></thead>";
			    	$.each(json,function(key,value) {
			    		table += "<tbody><tr><td>"
		    				+ value["age"]
		    				+ "</td>"
		    				+ "<td>"
		    				+ value["clientName"]
	    					+ "</td>"
	    					+ "<td>"
		    				+ "<input type='checkbox' name='selectClients'/>"		    				
							+ "</td></tr></tbody>"
			    	});
			    	table += "</table>"
			    		
			    	table += "<div class='container' align='center'><button type='submit' value='Submit' class='btn btn-default' id='send'>Send selected clients to own email</button></div>"
			    		$("#display").html(table);
				}	

			});
	}
	
	function displayAll(){
		var table = "<table id='table'  class='display' cellspacing='0' width='100%'>";
		var isEmpty = false;
		$.ajax({
			url: "DisplayAllInfant",
			type: "get",
		    dataType : "json",
		    
		    success: function(data){
		    	var json = jQuery.parseJSON(JSON.stringify(data));
		    	console.log(json);
		    	table += "<thead><tr><th>Starting Age<a href='#' onClick=sortAscAge(this.id) id='ageRequired'>&#9652</a>"
	    			+ "<a href='#' onClick=sortDescAge(this.id) id='ageRequired'> &#9662</a></th>"
	    			+ "<th>Common Illness<a href='#' onClick=sortAscIllness(this.id) id='conditionName'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='conditionName'> &#9662</a></th>"
	    			+ "<th>Screening <a href='#' onClick=sortAscScreening(this.id) id='screening'> &#9652</a>"
	    			+ "<a href='#' onClick=sortDescIllness(this.id) id='screening'> &#9662</a></th>"
	    			+ "<th>Regularity of screening</th>"
	    			+ "<th>View Patients</th>"
	    			+ "<th>Edit</th>"
	    			+ "<th>Delete</th></tr></thead>";
	    			$.each(json,function(key, value) {
		    		table += "<tbody><tr><td>"
	    				+ value["ageRequired"]
	    				+ "</td>"
	    				+ "<td>"
	    				+ value["conditionName"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["screening"]
    					+ "</td>"
    					+ "<td>"
	    				+ value["years"] 
    					+ "</td>"
    					+ "<td>"
	    				+"<a href='#' onClick=viewPatientList(this.id) id= '"
	    				+ value.ID
	    				+ "'>Link to view patients</a>"
    					+ "</td>"
    					+ "<td>"
	    				+ "<a href='#' onClick=editItem(this.id) id= '"
	    				+ value.ID
	    				+ "'>Edit</a>"
    					+ "</td>"
    					+ '<td><a href=# onClick=deleteItem(this.id) id="'
						+ value.ID
						+ '">Delete</a></td></tr>'		    				
						+ "</td></tr></tbody>"
		    	});
		    	table += "</table>"
		    		$("#display").html(table);
		    	
		    }	
		    
		});	
		}
	
	
	
		
 </script>
  </head>
  
  <body>
      <div w3-include-html="navBar.html"></div> 
		<script>
			w3IncludeHTML();
		</script>
   
		<div class="page-header"  align="center">
		  <h1><b>View Screenings - Infant</b></h1>
		  <div class="row">
		  <button type="button" class="btn btn-default"><a href="addScreening.html">Add new screening</a></button>
		  <div class="container" align="right">
		   		<input type="text" id="myInput" onkeyup="mySearch()" placeholder="Search Screenings by Name..">
		   	</div>
		   	</div>
		</div>



		<div class="container">
		<div class="btn-group btn-group-justified" role="group">
		  <div class="btn-group" role="group">
		    <button type="button" id="selectInfant" class="btn btn-primary"><b>Infants (0-24 months)</b></button>
		  </div>
		  <div class="btn-group" role="group">
		    <button type="button" id="selectAdult" class="btn btn-default"><b>Adults (2 years and above)</b></button>
		  </div>
		</div>
		</div>
	
		<div class="container" id="display" >
		  
  
</div>
  </body>
</html>
