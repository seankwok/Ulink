<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <title>Client</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
	<script src="http://www.w3schools.com/lib/w3data.js"></script>

<style>
 	
	#myInput {
	    background-position: 10px 12px; /* Position the search icon */
	    background-repeat: no-repeat; /* Do not repeat the icon image */
	    width: 30%; /* Full-width */
	    font-size: 16px; /* Increase font-size */
	    padding: 12px 20px 12px 40px; /* Add some padding */
	    border: 1px solid #ddd; /* Add a grey border */
	    margin-bottom: 12px; /* Add some space below the input */
	}
	
	#table {
	    border-collapse: collapse; /* Collapse borders */
	    width: 100%; /* Full-width */
	    font-size: 18px; /* Increase font-size */

	}
	
	#table th, #table td {
	    text-align: left; /* Left-align text */
	    padding: 10px; /* Add padding */
	}

	#table tr {
	    /* Add a bottom border to all table rows */
	    border-bottom: 1px solid #ddd; 
	     padding-bottom: 30px; /* Add padding */
	}
	
	#table tr.header, #table tr:hover {
	    /* Add background color to the table header and on hover */
	    font-color: black;
	}	
	
	/* unvisited link */
	a:link {
	    text-decoration:none;
	}
	
	/* visited link */
	a:visited {
	    text-decoration:none;
	}
	
	/* mouse over link */
	a:hover {
	    text-decoration:none;
	}
	
	/* selected link */
	a:active {
	    text-decoration:none;
	}
	
 select
    {
        border:0px;
        outline:0px;
        width:150px;
    }
	.team{
		width:90px;
	}
	
</style>
 
 <script type="text/javascript">

		$(document).ready(function() {
			displayAll();
		} );
		
		function jsFunction1(value){
			   // set search box value as client type
			   var txt =  document.getElementById('myInput');
			   txt.value = value;
			   document.getElementById('team').value = '';
			   mySearch();
		}
		
		function jsFunction2(value){
			   // set search box value as Team
			   var txt =  document.getElementById('myInput');
			   txt.value = value;
			   document.getElementById('type').value = '';
			   mySearch();
			  
		}

		function mySearch() {
			 var searchText = document.getElementById('myInput').value.toUpperCase();
			    var targetTable = document.getElementById('table');
			    var targetTableColCount;			            
			    //Loop through table rows
			    for (var rowIndex = 0; rowIndex < targetTable.rows.length; rowIndex++) {
			        var rowData = '';

			        //Get column count from header row
			        if (rowIndex == 0) {
			           targetTableColCount = targetTable.rows.item(rowIndex).cells.length;
			           continue; //do not execute further code for header row.
			        }
			                
			        //Process data rows. (rowIndex >= 1)
			        for (var colIndex = 0; colIndex < targetTableColCount; colIndex++) {
			            rowData += targetTable.rows.item(rowIndex).cells.item(colIndex).textContent.toUpperCase();
			        }

			        //If search term is not found in row data
			        //then hide the row, else show
			        if (rowData.indexOf(searchText) == -1)
			            targetTable.rows.item(rowIndex).style.display = 'none';
			        else
			            targetTable.rows.item(rowIndex).style.display = 'table-row';
			    }
			}

		function directToClientProfile(clickedID){
			var sendData = {
					"clientName" : clickedID
				};
				console.log(clickedID);
				$.ajax({
					url : "DisplayAllClientByName2",
					type : "post",
					data : sendData,
					dataType : "json",
					complete : function(data) {
						displayAll();
							window.location="clientInfo.html";						
					}
				});
		}
			
		

		function displayAll() {
			var table = "<table id='table' class=' table-hover'>";
			var isEmpty = false;
			$.ajax({
				url: "DisplayAllClient",
				type: "get",
			    dataType : "json",
			    complete: function(data){
			    	var json = jQuery.parseJSON(data.responseText);
	    					
				    table += "<thead>"
					    	   +"<th>Client Name</th>"			    	
					    	   +"<th>"
					    		+"<select onchange='jsFunction1(value)' id='type'>"
							    	+"<option value='Company' onclick='if (!document.getElementById('searchInput').onchange()) mySearch();'>Company</option>"
							    	+"<option value='Employee'>Employee</option>"
							    	+"<option value='Individual'>Individual</option>"
							    	+"<option value='' selected='selected' >All Client Type</option>"
					    		 +"</select>"
						    	+"</th>"
						    	+"<th width=30% >"
				    			 +"<select class='team' onchange='jsFunction2(value)' id='team'>"
							    	+"<option value='Visa'>Visa</option>"
							    	+"<option value='Medical'>Medical</option>"
								    +"<option value='' selected='selected'>Team</option>"		    	
		    					 +"</select>"
				    			+"</th>"
				    			+"</thead>"
				    			
				    			+"<body>"
			    	$.each(json, function(i, item){
						table 	+= "<tr>"
									+"<td>"
										+ "<a href='#' onClick=directToClientProfile(this.id) id= '"
					    				+ item.clientName
					    				+ "'>"+item.clientName +"</a>"
		    						+ "</td>"
		    						+ "<td width=30%>"
		    							+ item.clientType
		    						+ "</td>"
			    					+ "<td>"
			    						+ item.medical
			    					+ "</td>"
		    					+ "</tr>"
		    					
					});
			    	table += "</tbody></table>"
			    	$("#display").html(table);				    	
			    }				    
			});			
		}
	  
	</script>
	
	<script src="jquery.js"></script> 
    <script> 
    $(function(){
      $("#includedContent").load("navBar.html"); 
    });
    </script> 
 
  </head>
  
  <body>
  
  	<div id="includedContent"></div>
	
    <div class="page-header">
       <h1 align="center"><b>Client List</b></h1>
    </div>

	<div align="center"><input type="text" id="myInput" onkeyup="mySearch()" placeholder="Search Client by Name.."></div>
    
	<div id="display" class="container"  ></div>

	<script>
		w3IncludeHTML();
	</script>

  </body>
</html>
